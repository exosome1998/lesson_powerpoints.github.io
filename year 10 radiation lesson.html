<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lesson 7: Radiation & Numeracy</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Lexend:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* =========================================
           1. CORE THEME
           ========================================= */
        :root {
            --primary: #8e44ad;    /* Purple for Radiation */
            --bg-color: #f4f6f7;   /* Light Grey */
            --highlight: #f1c40f;  /* Yellow */
            --correct: #27ae60;
            --wrong: #c0392b;
            --text-dark: #2c3e50;
        }

        body {
            margin: 0; padding: 0;
            font-family: 'Lexend', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-dark);
            font-size: 1.5rem;
            padding-bottom: 120px;
            padding-top: 60px;
            overflow-x: hidden;
        }

        .container-wrapper {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 10px;
            box-sizing: border-box;
        }

        h1 { font-family: 'Comic Neue'; color: var(--primary); margin: 5px 0; font-size: 2.5rem; }
        h2 { font-family: 'Comic Neue'; border-bottom: 4px solid var(--highlight); display: inline-block; font-size: 2rem; margin: 10px 0; }
        
        /* =========================================
           2. SLIDE LAYOUT
           ========================================= */
        .slide {
            min-height: 80vh;
            width: 100%;
            padding: 20px;
            border-bottom: 10px solid var(--primary);
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            margin-bottom: 40px;
            border-radius: 8px;
        }

        .slide-number {
            position: absolute; bottom: 5px; right: 10px;
            font-size: 1rem; color: #ccc;
        }

        /* =========================================
           3. INTERACTIVE ELEMENTS
           ========================================= */
        .fragment {
            opacity: 0; transform: translateY(10px); transition: all 0.3s ease;
            visibility: hidden; height: 0; overflow: hidden; width: 100%;
            display: flex; flex-direction: column; align-items: center;
        }
        .fragment.visible {
            opacity: 1; transform: translateY(0); visibility: visible;
            height: auto; overflow: visible; margin-bottom: 15px;
        }

        /* WORD BANK */
        .word-bank {
            background: #e8f6f3; border: 2px solid var(--primary);
            padding: 15px; border-radius: 10px; margin-bottom: 20px;
            display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;
        }
        .wb-item {
            background: white; padding: 5px 15px; border-radius: 5px;
            font-weight: bold; color: var(--primary); box-shadow: 2px 2px 0 rgba(0,0,0,0.1);
        }

        /* MULTIPLE CHOICE BTNS */
        .tf-btn {
            width: 100%; max-width: 700px; padding: 15px; margin: 8px 0;
            font-size: 1.3rem; background: white; border: 2px solid var(--primary);
            border-radius: 10px; cursor: pointer; text-align: left;
            transition: 0.2s; box-shadow: 3px 3px 0 rgba(0,0,0,0.1);
        }
        .tf-btn:hover { background: #f0f3f4; }
        .tf-btn.correct { background: var(--correct); color: white; border-color: var(--correct); }
        .tf-btn.wrong { background: var(--wrong); color: white; border-color: var(--wrong); }

        /* =========================================
           4. NOTE TAKING (FIXED CLOZE)
           ========================================= */
        .note-container { width: 100%; max-width: 800px; margin-top: 15px; }

        .note-header {
            background: var(--highlight); color: black;
            padding: 5px 20px; font-weight: 800; font-size: 1.2rem;
            border: 2px solid black; border-bottom: none;
            border-radius: 10px 10px 0 0; display: inline-block; margin-left: 15px;
        }

        .note-body {
            background: #fffcf0; border: 3px solid black;
            border-radius: 10px; padding: 20px;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.1);
            font-size: 1.4rem; line-height: 1.6; text-align: left;
        }

        .cloze {
            background-color: var(--primary); 
            color: var(--primary); /* Hidden Text */
            border-radius: 4px; padding: 0 8px; cursor: pointer;
            user-select: none; font-weight: bold; display: inline-block;
            min-width: 80px; text-align: center; border: 2px solid var(--primary);
        }
        .cloze.revealed {
            background-color: white; 
            color: var(--correct); /* Revealed Text */
            border-color: var(--correct); border-bottom: 4px solid var(--correct);
        }

        /* =========================================
           5. MATH REVEAL ELEMENTS
           ========================================= */
        .math-step { 
            background: #fff; padding: 20px; margin: 15px 0; 
            border-radius: 8px; border-left: 6px solid var(--primary);
            box-shadow: 2px 2px 5px rgba(0,0,0,0.05); font-size: 1.3rem;
            text-align: left; width: 100%; max-width: 700px;
        }

        .math-reveal {
            background-color: #34495e; color: #34495e; /* Hides text by making it same color as bg */
            border-radius: 4px; padding: 0 6px; cursor: pointer;
            user-select: none; font-weight: bold; border: 1px solid #34495e;
            transition: all 0.2s;
        }
        .math-reveal:hover { opacity: 0.9; }
        
        .math-reveal.revealed {
            background-color: transparent; 
            color: #c0392b; /* Red text for emphasis */
            border-bottom: 2px solid #c0392b; border-top:none; border-left:none; border-right:none;
        }

        .fraction {
            display: inline-block; vertical-align: middle; text-align: center; margin: 0 5px;
        }
        .fraction .top { display: block; border-bottom: 2px solid black; padding: 0 5px; }
        .fraction .bottom { display: block; padding: 0 5px; }

        /* =========================================
           6. VISUALS & NAV
           ========================================= */
        .visual-box {
            width: 100%; max-width: 600px;
            background: white; border: 3px solid var(--primary);
            border-radius: 10px; margin: 10px 0; padding: 10px;
            display: flex; justify-content: center;
        }
        .visual-box svg { width: 100%; height: auto; max-height: 250px; }

        .camera-btn {
            position: absolute; top: 15px; right: 15px;
            background: white; border: 2px solid var(--primary);
            font-size: 1.2rem; width: 45px; height: 45px;
            border-radius: 50%; cursor: pointer; display: flex;
            justify-content: center; align-items: center; z-index: 50;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .visual-paste-area {
            width: 90%; display: none; border: 3px dashed #bdc3c7;
            background: #f8f9fa; padding: 10px; text-align: center;
            margin-bottom: 15px; border-radius: 8px;
        }
        .visual-paste-area img { max-width: 100%; max-height: 200px; display: block; margin: 0 auto; }

        #nav-bar {
            position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 600px; height: 70px;
            background: var(--primary); display: flex; justify-content: center;
            align-items: center; gap: 15px; z-index: 10000;
            border-radius: 35px; border: 3px solid white;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .nav-btn {
            background: #8e44ad; color: white; border: 2px solid white;
            padding: 8px 20px; font-size: 1.1rem; border-radius: 30px;
            font-weight: bold; cursor: pointer; min-width: 100px;
        }
        .nav-btn.secondary { background: #7f8c8d; }
        .nav-btn.save { background: var(--correct); }

        #top-save-btn {
            position: fixed; top: 10px; right: 10px;
            background: var(--correct); color: white; border: 2px solid white;
            padding: 8px 15px; border-radius: 8px; font-weight: bold; cursor: pointer;
            z-index: 10001; font-size: 1rem;
        }
    </style>
</head>
<body>

    <button id="top-save-btn" onclick="saveLesson()">üíæ Save</button>

    <div id="nav-bar">
        <button class="nav-btn secondary" onclick="goBack()">‚¨ÖÔ∏è Back</button>
        <button class="nav-btn" onclick="goNext()">Next ‚û°Ô∏è</button>
        <button class="nav-btn save" onclick="saveLesson()">üíæ Save</button>
    </div>

    <div class="container-wrapper">

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h1>üî• Do Now: Vacuum</h1>
            <p>Use the word bank to complete the sentences.</p>
            
            <div class="word-bank">
                <div class="wb-item">Space</div>
                <div class="wb-item">Particles</div>
                <div class="wb-item">Waves</div>
                <div class="wb-item">Vacuum</div>
            </div>

            <div class="note-container fragment visible">
                <div class="note-body">
                    <p>Heat transfer usually needs <span class="cloze" onclick="reveal(this)">PARTICLES</span> to bump into each other.</p>
                    <p>However, <span class="cloze" onclick="reveal(this)">SPACE</span> is empty. It is a <span class="cloze" onclick="reveal(this)">VACUUM</span>.</p>
                    <p>Heat from the Sun travels to Earth as <span class="cloze" onclick="reveal(this)">WAVES</span>.</p>
                </div>
            </div>
            <div class="slide-number">1 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h1>Today's Mission</h1>
            <ul style="font-size: 1.6rem; line-height: 1.8; text-align: left; width: 90%;">
                <li class="fragment">üì° 1. Understand <strong>Infrared Radiation</strong>.</li>
                <li class="fragment">üé® 2. Compare <strong>Surfaces</strong> (Black vs Silver).</li>
                <li class="fragment">üìä 3. Numeracy: <strong>Calculating Rates</strong>.</li>
                <li class="fragment">üåç 4. Apply to <strong>Real World</strong>.</li>
            </ul>
            <div class="slide-number">2 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>1. What is Radiation?</h2>
            <p>It is not just "nuclear" stuff!</p>
            
            <div class="visual-box fragment">
                <svg viewBox="0 0 300 100">
                    <circle cx="30" cy="50" r="15" fill="orange"/>
                    <text x="30" y="80" font-size="10" text-anchor="middle">Hot Object</text>
                    <path d="M50,50 Q100,20 150,50 T250,50" fill="none" stroke="red" stroke-width="3" stroke-dasharray="5,5"/>
                    <text x="150" y="30" font-size="12" fill="red" text-anchor="middle">Infrared Wave</text>
                </svg>
            </div>

            <div class="fragment" style="text-align: left; width: 90%; background: #fff; padding: 15px; border-radius: 8px; margin-top: 10px;">
                <p>Every hot object sends out invisible light called <strong>Infrared</strong>.</p>
                <p>You cannot see it, but your skin feels it as <strong>Heat</strong>.</p>
            </div>

            <div class="fragment note-container">
                <div class="note-header">Note 1/7</div>
                <div class="note-body">
                    <strong>Infrared Radiation:</strong> Heat travelling as a <span class="cloze" onclick="reveal(this)">WAVE</span>. It does not need air or particles.
                </div>
            </div>
            <div class="slide-number">3 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>2. Surface Literacy</h2>
            <p>When radiation hits an object, two things can happen.</p>
            
            <div class="visual-box fragment">
                <svg viewBox="0 0 400 150">
                    <rect x="20" y="100" width="100" height="10" fill="black"/>
                    <text x="70" y="130" text-anchor="middle" font-size="12" font-weight="bold">Dark / Matte</text>
                    <path d="M70,20 L70,95" stroke="red" stroke-width="3" marker-end="url(#arrow)"/>
                    <text x="85" y="60" fill="black" font-size="12">Absorb</text>

                    <rect x="220" y="100" width="100" height="10" fill="#bdc3c7" stroke="black"/>
                    <text x="270" y="130" text-anchor="middle" font-size="12" font-weight="bold">Shiny / Silver</text>
                    <path d="M250,20 L270,95 L290,20" fill="none" stroke="red" stroke-width="3"/>
                    <text x="310" y="60" fill="black" font-size="12">Reflect</text>
                </svg>
            </div>

            <div class="fragment note-container">
                <div class="note-header">Note 2/7</div>
                <div class="note-body">
                    <strong>Absorb:</strong> To take heat <span class="cloze" onclick="reveal(this)">IN</span> (get hot).
                    <br><strong>Reflect:</strong> To bounce heat <span class="cloze" onclick="reveal(this)">OFF</span>.
                </div>
            </div>
            <div class="slide-number">4 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>Emission (Letting heat out)</h2>
            <p>Imagine two cups of hot tea.</p>
            
            <div class="fragment" style="width: 100%; text-align: left; background: #e8f6f3; padding: 15px; border-radius: 10px;">
                <p><strong>Cup A (Black):</strong> Good at absorbing, but also good at <strong>letting heat escape</strong>.</p>
                <p><strong>Cup B (Silver):</strong> Bad at absorbing, but <strong>traps heat inside</strong>.</p>
            </div>

            <div class="fragment note-container">
                <div class="note-header">Note 3/7</div>
                <div class="note-body">
                    <strong>Black Surfaces:</strong> Best at Absorbing and <span class="cloze" onclick="reveal(this)">EMITTING</span> (giving out) heat.
                    <br><strong>Silver Surfaces:</strong> Best at Keeping heat <span class="cloze" onclick="reveal(this)">INSIDE</span>.
                </div>
            </div>
            <div class="slide-number">5 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>3. The Experiment Data</h2>
            <p>We tracked the cooling of two cans for 12 minutes.</p>
            
            <table class="fragment" style="width:90%; font-size:1.3rem; border-collapse: collapse; margin-bottom: 20px;">
                <tr style="background:#2c3e50; color:white;">
                    <th style="padding:10px;">Time (min)</th>
                    <th style="padding:10px;">Black Temp (¬∞C)</th>
                    <th style="padding:10px;">Silver Temp (¬∞C)</th>
                </tr>
                <tr><td style="padding:10px;">0</td><td>92.0</td><td>92.0</td></tr>
                <tr style="background:#f2f2f2;"><td style="padding:10px;">4</td><td>78.0</td><td>85.0</td></tr>
                <tr><td style="padding:10px;">8</td><td>65.0</td><td>79.0</td></tr>
                <tr style="background:#f2f2f2;"><td style="padding:10px;">12</td><td>54.0</td><td>74.0</td></tr>
            </table>

            <div class="fragment">
                <p><strong>Observation:</strong> The Black can's temperature drops FASTER.</p>
                <p>(No note to write - just think about the data!)</p>
            </div>
            <div class="slide-number">6 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>Numeracy: Rate of Change</h2>
            <p>Calculate the <strong>Rate of Cooling</strong> for the Black Can.</p>
            <p><em>Click the blocks to reveal the working.</em></p>
            
            <div class="fragment math-step">
                <p><strong>Formula:</strong> <span class="fraction"><span class="top">Total Temp Change</span><span class="bottom">Total Time</span></span></p>
                <hr style="border:0; border-top:1px dashed #ccc;">
                
                <p><strong>1. Find Change:</strong> 92.0 - 54.0 = <span class="math-reveal" onclick="toggleMath(this)">38.0</span> ¬∞C</p>
                
                <p><strong>2. Find Time:</strong> <span class="math-reveal" onclick="toggleMath(this)">12</span> minutes</p>

                <p><strong>3. Divide:</strong> <span class="fraction"><span class="top"><span class="math-reveal" onclick="toggleMath(this)">38.0</span></span><span class="bottom"><span class="math-reveal" onclick="toggleMath(this)">12</span></span></span> = <span class="math-reveal" onclick="toggleMath(this)">3.17</span> ¬∞C/min</p>
            </div>
            <div class="slide-number">7 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>Numeracy: Percentage Change</h2>
            <p>What <strong>percentage</strong> of heat did the Black Can lose?</p>
            <p><em>Click the blocks to reveal the working.</em></p>
            
            <div class="fragment math-step">
                <p><strong>Formula:</strong> <span class="fraction"><span class="top">Change</span><span class="bottom">Start Value</span></span> &times; 100</p>
                <hr style="border:0; border-top:1px dashed #ccc;">
                
                <p><strong>1. Substitution:</strong> <span class="fraction"><span class="top"><span class="math-reveal" onclick="toggleMath(this)">38.0</span></span><span class="bottom"><span class="math-reveal" onclick="toggleMath(this)">92.0</span></span></span> &times; 100</p>
                
                <p><strong>2. Answer:</strong> <span class="math-reveal" onclick="toggleMath(this)">41.3</span> %</p>
            </div>
            <div class="slide-number">8 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>Critical Thinking: The Graph</h2>
            <p>If we plot the temperature on a graph, the line is <strong>not straight</strong>. Why?</p>
            
            <div class="visual-box fragment">
                <svg viewBox="0 0 300 200">
                    <line x1="40" y1="180" x2="280" y2="180" stroke="black" stroke-width="2"/>
                    <line x1="40" y1="180" x2="40" y2="20" stroke="black" stroke-width="2"/>
                    <text x="150" y="195" font-size="12">Time</text>
                    <text x="10" y="100" font-size="12" transform="rotate(-90 10,100)">Temp</text>
                    
                    <path d="M40,20 Q100,100 280,140" fill="none" stroke="red" stroke-width="3"/>
                    <text x="120" y="60" fill="red" font-size="12">Steep (Fast)</text>
                    <text x="220" y="130" fill="red" font-size="12">Flat (Slow)</text>
                </svg>
            </div>

            <div class="fragment note-container">
                <div class="note-header">Note 4/7</div>
                <div class="note-body">
                    <strong>Cooling Curve:</strong> Objects cool down FAST when they are very hot. The rate slows down as they get <span class="cloze" onclick="reveal(this)">COLDER</span>.
                </div>
            </div>
            <div class="slide-number">9 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>4. Real World Application</h2>
            <p>How do we use this knowledge in real life?</p>
            <p>Let's look at keeping things hot or cold.</p>
            <div class="slide-number">10 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>Example 1: The Thermos Flask</h2>
            <p>How does a thermos keep coffee hot for 8 hours?</p>
            
            <div class="visual-box fragment">
                <svg viewBox="0 0 200 150">
                    <rect x="70" y="20" width="60" height="100" fill="#bdc3c7" stroke="black"/>
                    <rect x="80" y="30" width="40" height="80" fill="#7f8c8d" stroke="none"/>
                    <text x="100" y="70" text-anchor="middle" fill="white" font-size="12">Coffee</text>
                    <line x1="130" y1="40" x2="180" y2="40" stroke="black"/>
                    <text x="185" y="45" font-size="12">Silver Lining</text>
                </svg>
            </div>

            <div class="fragment" style="width: 100%; max-width: 700px; text-align: left;">
                <p><strong>1. Silver Lining:</strong> The inside is shiny silver. This <span style="color:var(--convection)">Reflects</span> the heat back into the coffee.</p>
                <p><strong>2. Vacuum Gap:</strong> There is a gap with no air. This stops <span style="color:var(--conduction)">Conduction</span> and Convection.</p>
            </div>

             <div class="fragment note-container">
                <div class="note-header">Note 5/7</div>
                <div class="note-body">
                    A thermos uses a <span class="cloze" onclick="reveal(this)">SILVER</span> surface to reflect radiation back into the hot liquid.
                </div>
            </div>
            <div class="slide-number">11 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>Example 2: Animals</h2>
            <p>Why do African Elephants have huge ears?</p>
            
            <div class="fragment" style="text-align:left; background:#fff; padding:15px; border:2px solid #333; width: 90%;">
                <p>Africa is very hot. The elephant needs to lose heat.</p>
                <p>It pumps hot blood to its ears.</p>
                <p>The ears have a large <strong>Surface Area</strong> to emit radiation.</p>
            </div>

            <div class="fragment note-container">
                <div class="note-header">Note 6/7</div>
                <div class="note-body">
                    To lose heat fast, you need a large <span class="cloze" onclick="reveal(this)">SURFACE AREA</span>.
                </div>
            </div>
            <div class="slide-number">12 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>Example 3: House Roofs</h2>
            <p>If you lived in a hot desert, what color should your roof be?</p>
            
            <div class="fragment" style="display:flex; gap:10px; width:100%; justify-content:center;">
                <div style="background:white; border:2px solid black; padding:10px; width:45%;">
                    <strong>White Roof</strong>
                    <br>Reflects Sun.
                    <br>House stays Cool.
                </div>
                <div style="background:black; color:white; padding:10px; width:45%;">
                    <strong>Black Roof</strong>
                    <br>Absorbs Sun.
                    <br>House gets Hot.
                </div>
            </div>

            <div class="fragment note-container">
                <div class="note-header">Note 7/7</div>
                <div class="note-body">
                    In hot countries, houses are painted <span class="cloze" onclick="reveal(this)">WHITE</span> to reflect the radiation from the Sun.
                </div>
            </div>
            <div class="slide-number">13 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>Example 4: Firefighters</h2>
            <p>Firefighters sometimes walk near huge fires.</p>
            <p>Why are their suits shiny?</p>
            
            <div class="fragment" style="margin-top:20px;">
                <button class="tf-btn" onclick="this.innerHTML='‚úÖ <strong>To Reflect the heat</strong> away from their body.'; this.classList.add('correct');">Reveal Answer</button>
            </div>
            <div class="slide-number">14 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h2>Summary: Cloze Passage</h2>
            <p>Tap the words to complete the summary.</p>
            
            <div class="note-container fragment visible" style="max-width: 90%;">
                <div class="note-body" style="font-size: 1.3rem;">
                    Thermal Radiation is the transfer of heat by <span class="cloze" onclick="reveal(this)">WAVES</span>.
                    <br><br>
                    <span class="cloze" onclick="reveal(this)">BLACK</span> surfaces are the best absorbers and emitters (good at losing heat).
                    <br><br>
                    <span class="cloze" onclick="reveal(this)">SILVER</span> surfaces are the best reflectors (good at trapping heat).
                    <br><br>
                    Objects cool down faster when they are <span class="cloze" onclick="reveal(this)">VERY HOT</span>.
                </div>
            </div>
            <div class="slide-number">15 / 18</div>
        </section>

        <section class="slide">
            <button class="camera-btn" onclick="toggleVisual(this)">üì∑</button>
            <div class="visual-paste-area">Paste Image (Ctrl+V)</div>
            <h1>üé´ Exit Ticket</h1>
            
            <div class="fragment" style="width:100%; max-width:600px; margin-top:20px;">
                <p><strong>1. Why is the back of a refrigerator painted black?</strong></p>
                <button class="tf-btn" onclick="this.classList.add('correct')">To emit (give out) heat fast</button>
                <button class="tf-btn" onclick="this.classList.add('wrong')">To reflect heat inside</button>
            </div>

            <div class="fragment" style="width:100%; max-width:600px; margin-top:20px;">
                <p><strong>2. If a shiny teapot loses 10¬∞C, and a black teapot loses 20¬∞C...</strong></p>
                <button class="tf-btn" onclick="this.classList.add('wrong')">Shiny is faster</button>
                <button class="tf-btn" onclick="this.classList.add('correct')">Black is faster</button>
            </div>
            
            <div class="fragment" style="width:100%; max-width:600px; margin-top:20px;">
                <p><strong>3. Rate Check: Drop of 20¬∞C in 4 mins.</strong></p>
                <button class="tf-btn" onclick="this.classList.add('correct')">5 ¬∞C/min</button>
                <button class="tf-btn" onclick="this.classList.add('wrong')">0.2 ¬∞C/min</button>
            </div>

            <p style="margin-top:30px;">Click <strong>SAVE</strong> at the top right!</p>
            <div class="slide-number">16 / 18</div>
        </section>

        <section class="slide" style="min-height: 20vh; border:none; background: transparent; box-shadow: none;">
            <p>End of Lesson</p>
            <div class="slide-number">17 / 18</div>
        </section>

    </div>

    <script>
        const slides = document.querySelectorAll('.slide');

        function getActiveSlideIndex() {
            let index = 0; let minDistance = Infinity;
            slides.forEach((slide, i) => {
                const rect = slide.getBoundingClientRect();
                const dist = Math.abs(rect.top);
                if (dist < minDistance && dist < window.innerHeight / 1.5) {
                    minDistance = dist; index = i;
                }
            });
            return index;
        }

        function scrollToSlide(index) {
            if (index >= 0 && index < slides.length) {
                slides[index].scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function goNext() {
            const index = getActiveSlideIndex();
            const currentSlide = slides[index];
            const hiddenFragments = currentSlide.querySelectorAll('.fragment:not(.visible)');
            if (hiddenFragments.length > 0) {
                hiddenFragments[0].classList.add('visible');
            } else {
                scrollToSlide(index + 1);
            }
        }

        function goBack() {
            const index = getActiveSlideIndex();
            const currentSlide = slides[index];
            const visibleFragments = Array.from(currentSlide.querySelectorAll('.fragment.visible'));
            if (visibleFragments.length > 0) {
                visibleFragments[visibleFragments.length - 1].classList.remove('visible');
            } else {
                scrollToSlide(index - 1);
            }
        }

        function reveal(el) { 
            if(el.classList.contains('revealed')) { el.classList.remove('revealed'); } 
            else { el.classList.add('revealed'); } 
        }

        function toggleMath(el) {
            if(el.classList.contains('revealed')) {
                el.classList.remove('revealed');
            } else {
                el.classList.add('revealed');
            }
        }

        function toggleVisual(btn) {
            const container = btn.nextElementSibling;
            container.style.display = (container.style.display === 'block') ? 'none' : 'block';
            if(container.style.display === 'block') container.innerText = "Paste Image (Ctrl+V)";
        }

        document.addEventListener('paste', (e) => {
            const index = getActiveSlideIndex();
            const activeSlide = slides[index];
            const container = activeSlide.querySelector('.visual-paste-area');
            if (!container) return;
            const items = e.clipboardData.items;
            for (let i = 0; i < items.length; i++) {
                if (items[i].type.indexOf('image') !== -1) {
                    const blob = items[i].getAsFile();
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        container.style.display = 'block';
                        container.innerHTML = `<img src="${event.target.result}">`;
                    };
                    reader.readAsDataURL(blob);
                }
            }
        });

        document.addEventListener('keydown', (e) => {
            if(e.code === 'ArrowRight' || e.code === 'Space') { e.preventDefault(); goNext(); }
            if(e.code === 'ArrowLeft') { e.preventDefault(); goBack(); }
        });

        function saveLesson() {
            const html = document.documentElement.outerHTML;
            const blob = new Blob([html], {type: 'text/html'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'Lesson7_Radiation_Advanced.html';
            a.click();
        }
    </script>
</body>
</html>